function processDirectStripe(e,r){var i=ds_shortcode_params,s=i["direct-stripe"];if("donation"===s)var a=jQuery("#donationvalue").val();else var a=i.amount;jQuery("#loadingDS").show(),jQuery.post(ajaxurl,{action:"ds_process_button",stripeToken:e.id,stripeEmail:e.email,type:s,amount:a,params:i},function(e){switch(e.id){case"1":jQuery("#loadingDS").hide(),jQuery("#directStripe_answer").html(e.message),jQuery("#directStripe_answer").show();break;case"2":jQuery("#loadingDS").hide(),window.location.replace(e.url);break;default:jQuery("#loadingDS").hide(),jQuery("#directStripe_answer").html(e),jQuery("#directStripe_answer").show()}})}var ds_general_values=ds_general_values,ds_user_email=ds_user_email;jQuery(".direct-stripe-button-id").each(function(e){var r=jQuery(this).data("id"),i=window["atts"+r];if("1"===ds_general_values.direct_stripe_checkbox_api_keys)var s=ds_general_values.direct_stripe_test_publishable_api_key;else var s=ds_general_values.direct_stripe_live_publishable_api_key;var a=i.description;if(void 0!=i.currency)var t=i.currency;else var t=ds_general_values.currency;"1"===ds_general_values.direct_stripe_shipping_infos_checkbox||"true"===i.shipping?(shippingAddress=!0,billingAddress=!0):"1"===ds_general_values.direct_stripe_billing_infos_checkbox||"true"===i.billing?(shippingAddress=!0,billingAddress=!1):(shippingAddress=!1,billingAddress=!1);var n=StripeCheckout.configure({key:s,image:ds_general_values.direct_stripe_logo_image,locale:"auto",token:processDirectStripe});jQuery(this).on("click",function(e){var r="#directStripe_answer";return jQuery(this).hasClass("ds-check-tc")&&!jQuery("#conditions").is(":checked")?(jQuery(r).html("Please check the T&C<br/>"),jQuery(r).css("color","red"),jQuery(r).show(),setTimeout(function(){jQuery(r).hide()},1e4),!1):!jQuery(this).hasClass("ds-check-donation")||jQuery("#donationvalue").val()||jQuery("#donationvalue").val().match(/^\+?[0-9]*\.?[0-9]+$/)?(n.open({name:name,description:a,email:ds_user_email,currency:t,billingAddress:billingAddress,shippingAddress:shippingAddress}),void e.preventDefault()):(jQuery(r).html("Please enter amount<br/>"),jQuery(r).css("color","red"),jQuery(r).show(),setTimeout(function(){jQuery(r).hide()},1e4),!1)}),window.addEventListener("popstate",function(){n.close()})});