function stripe_checkout(e){return StripeCheckout.configure({key:e.key,token:function(r,i){var a=e,t=a.type;if("donation"===t)var n=jQuery("#donationvalue").val();else var n=a.amount;jQuery("#loadingDS").show(),jQuery.post(e.ajaxurl,{action:"ds_process_button",stripeToken:r.id,stripeEmail:r.email,type:t,amount:n,params:a,args:i},function(e){switch(e.id){case"1":jQuery("#loadingDS").hide(),jQuery("#directStripe_answer").html(e.message),jQuery("#directStripe_answer").show(),setTimeout(function(){jQuery("#directStripe_answer").hide()},1e4);break;case"2":jQuery("#loadingDS").hide(),window.location.replace(e.url);break;default:jQuery("#loadingDS").hide(),jQuery("#directStripe_answer").html(e),jQuery("#directStripe_answer").show(),setTimeout(function(){jQuery("#directStripe_answer").hide()},1e4)}})}})}jQuery(".direct-stripe-button-id").on("click",function(e){var r=jQuery(this).data("id"),i=window[r];if(""!==i.currency)var a=i.currency;else var a=i.general_currency;if("false"!==i.display_amount&&"subscription"!==i.type)var t=i.original_amount;if("true"===i.rememberme)var n=!0;else if("false"!==i.rememberme&&"1"===i.general_rememberme)var n=!0;else var n=!1;if("true"===i.shipping)var s=!0,o=!0;else if("false"!==i.shipping&&"1"===i.general_shipping)var s=!0,o=!0;else if("true"===i.billing)var s=!1,o=!0;else if("true"!==i.billing&&"1"===i.general_billing)var s=!1,o=!0;else var s=!1,o=!1;var u="#directStripe_answer";return jQuery(this).hasClass("ds-check-tc")&&!jQuery("#conditions").is(":checked")?(jQuery(u).html("Please check the T&C<br/>"),jQuery(u).css("color","red"),jQuery(u).show(),setTimeout(function(){jQuery(u).hide()},1e4),!1):!jQuery(this).hasClass("ds-check-donation")||jQuery("#donationvalue").val()||jQuery("#donationvalue").val().match(/^\+?[0-9]*\.?[0-9]+$/)?(handler=stripe_checkout(i),handler.open({locale:"auto",image:i.image,name:i.name,description:i.description,email:i.current_email_address,currency:a,panelLabel:i.panellabel,amount:t,billingAddress:o,shippingAddress:s,allowRememberMe:n}),void e.preventDefault()):(jQuery(u).html("Please enter amount<br/>"),jQuery(u).css("color","red"),jQuery(u).show(),setTimeout(function(){jQuery(u).hide()},1e4),!1)}),window.addEventListener("popstate",function(){handler.close()});