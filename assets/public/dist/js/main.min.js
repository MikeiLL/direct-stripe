function stripe_checkout(e){return StripeCheckout.configure({key:e.key,token:function(i,r){var s=e,n=s.type;if("donation"===n)var a=jQuery("#donationvalue").val();else var a=s.amount;jQuery("#loadingDS").show(),jQuery.post(e.ajaxurl,{action:"ds_process_button",stripeToken:i.id,stripeEmail:i.email,type:n,amount:a,params:s,billing_name:r.billing_name,billing_address_country:r.billing_address_country,billing_address_zip:r.billing_address_zip,billing_address_state:r.billing_address_state,billing_address_line1:r.billing_address_line1,billing_address_city:r.billing_address_city,billing_address_country_code:r.billing_address_country_code,shipping_name:r.shipping_name,shipping_address_country:r.shipping_address_country,shipping_address_zip:r.shipping_address_zip,shipping_address_state:r.shipping_address_state,shipping_address_line1:r.shipping_address_line1,shipping_address_city:r.shipping_address_city,shipping_address_country_code:r.shipping_address_country_code},function(e){switch(e.id){case"1":jQuery("#loadingDS").hide(),jQuery("#directStripe_answer").html(e.message),jQuery("#directStripe_answer").show(),setTimeout(function(){jQuery("#directStripe_answer").hide()},1e4);break;case"2":jQuery("#loadingDS").hide(),window.location.replace(e.url);break;default:jQuery("#loadingDS").hide(),jQuery("#directStripe_answer").html(e),jQuery("#directStripe_answer").show(),setTimeout(function(){jQuery("#directStripe_answer").hide()},1e4)}})}})}jQuery(".direct-stripe-button-id").on("click",function(e){var i=jQuery(this).data("id"),r=window[i];if(""!==r.currency)var s=r.currency;else var s=r.general_currency;if("false"!==r.display_amount&&"subscription"!==r.type)var n=r.original_amount;if("true"===r.rememberme)var a=!0;else if("false"!==r.rememberme&&"1"===r.general_rememberme)var a=!0;else var a=!1;if("true"===r.shipping)var t=!0,d=!0;else if("false"!==r.shipping&&"1"===r.general_shipping)var t=!0,d=!0;else if("true"===r.billing)var t=!1,d=!0;else if("true"!==r.billing&&"1"===r.general_billing)var t=!1,d=!0;else var t=!1,d=!1;var l="#ds-answer-"+i;return jQuery(this).hasClass("ds-check-tc")&&!jQuery("#ds-conditions-"+i).is(":checked")?(jQuery(l).html("Please check the T&C<br/>"),jQuery(l).css("color","red"),jQuery(l).show(),setTimeout(function(){jQuery(l).hide()},1e4),!1):!jQuery(this).hasClass("ds-check-donation")||jQuery("#donationvalue").val()||jQuery("#donationvalue").val().match(/^\+?[0-9]*\.?[0-9]+$/)?(handler=stripe_checkout(r),handler.open({locale:"auto",image:r.image,name:r.name,description:r.description,email:r.current_email_address,currency:s,panelLabel:r.panellabel,amount:n,billingAddress:d,shippingAddress:t,allowRememberMe:a}),void e.preventDefault()):(jQuery(l).html("Please enter amount<br/>"),jQuery(l).css("color","red"),jQuery(l).show(),setTimeout(function(){jQuery(l).hide()},1e4),!1)}),window.addEventListener("popstate",function(){handler.close()});