function stripe_checkout(e){return StripeCheckout.configure({key:e.key,token:function(r,i){var n=e,t=n.type;if("donation"===t)var a=jQuery("#donationvalue").val();else var a=n.amount;jQuery("#loadingDS").show(),jQuery.post(e.ajaxurl,{action:"ds_process_button",stripeToken:r.id,stripeEmail:r.email,type:t,amount:a,params:n,args:i},function(e){switch(e.id){case"1":jQuery("#loadingDS").hide(),jQuery("#directStripe_answer").html(e.message),jQuery("#directStripe_answer").show();break;case"2":jQuery("#loadingDS").hide(),window.location.replace(e.url);break;default:jQuery("#loadingDS").hide(),jQuery("#directStripe_answer").html(e),jQuery("#directStripe_answer").show()}})}})}jQuery(".direct-stripe-button-id").on("click",function(e){var r=jQuery(this).data("id"),i=window[r];""!==i.currency?currency=i.currency:currency=i.general_currency,"true"===i.rememberme?rememberme=!0:"false"!==i.rememberme&&"1"===i.general_rememberme?rememberme=!0:rememberme=!1,"true"===i.shipping?(shipping=!0,billing=!0):"false"!==i.shipping&&"1"===i.general_shipping?($shipping=!0,$billing=!0):"true"===i.billing?(shipping=!1,billing=!0):"true"!==i.billing&&"1"===i.general_billing?(shipping=!1,billing=!0):(shipping=!1,billing=!1);var n="#directStripe_answer";return jQuery(this).hasClass("ds-check-tc")&&!jQuery("#conditions").is(":checked")?(jQuery(n).html("Please check the T&C<br/>"),jQuery(n).css("color","red"),jQuery(n).show(),setTimeout(function(){jQuery(n).hide()},1e4),!1):!jQuery(this).hasClass("ds-check-donation")||jQuery("#donationvalue").val()||jQuery("#donationvalue").val().match(/^\+?[0-9]*\.?[0-9]+$/)?(handler=stripe_checkout(i),handler.open({locale:"auto",image:i.image,name:i.name,description:i.description,email:i.current_email_address,currency:currency,billingAddress:billing,shippingAddress:shipping,allowRememberMe:rememberme}),void e.preventDefault()):(jQuery(n).html("Please enter amount<br/>"),jQuery(n).css("color","red"),jQuery(n).show(),setTimeout(function(){jQuery(n).hide()},1e4),!1)}),window.addEventListener("popstate",function(){handler.close()});