function stripe_checkout(l){return StripeCheckout.configure({key:l.key,token:function(e,i){var s=l,n=s.type;if("donation"===n)var r=jQuery("#donationvalue").val();else r=s.amount;var a="#ds-answer-"+s.instance;jQuery("#loadingDS").show(),jQuery.post(l.ajaxurl,{action:"ds_process_button",stripeToken:e.id,stripeEmail:e.email,type:n,amount:r,params:s,billing_name:i.billing_name,billing_address_country:i.billing_address_country,billing_address_zip:i.billing_address_zip,billing_address_state:i.billing_address_state,billing_address_line1:i.billing_address_line1,billing_address_city:i.billing_address_city,billing_address_country_code:i.billing_address_country_code,shipping_name:i.shipping_name,shipping_address_country:i.shipping_address_country,shipping_address_zip:i.shipping_address_zip,shipping_address_state:i.shipping_address_state,shipping_address_line1:i.shipping_address_line1,shipping_address_city:i.shipping_address_city,shipping_address_country_code:i.shipping_address_country_code},function(e){switch(e.id){case"1":jQuery("#loadingDS").hide(),jQuery(a).addClass("success"),jQuery(a).html(e.message),jQuery(a).show(),setTimeout(function(){jQuery(a).hide()},1e4);break;case"2":jQuery("#loadingDS").hide(),window.location.assign(e.url);break;default:jQuery("#loadingDS").hide(),jQuery(a).addClass("error"),jQuery(a).html(e),jQuery(a).show(),setTimeout(function(){jQuery(a).hide()},1e4)}})}})}jQuery(".direct-stripe-button-id").on("click",function(e){var i=jQuery(this).data("id"),s=window[i];if(""!==s.currency)var n=s.currency;else n=s.general_currency;if("false"!==s.display_amount&&"subscription"!==s.type)var r=parseInt(s.original_amount);else r=0;if("true"===s.rememberme)var a=!0;else if("false"!==s.rememberme&&"1"===s.general_rememberme)a=!0;else a=!1;if("true"===s.shipping||"false"!==s.billing&&"false"!==s.shipping&&"1"===s.general_shipping)var l=!0,d=!0;else if("true"===s.billing&&"true"!==s.shipping||"false"!==s.billing&&"1"===s.general_billing)l=!1,d=!0;else d=!1,l=!1;var t="#ds-answer-"+i;return jQuery(this).hasClass("ds-check-tc")&&!jQuery("#ds-conditions-"+i).is(":checked")?(jQuery(t).html("Please check the T&C<br/>"),jQuery(t).addClass("error"),jQuery(t).show(),setTimeout(function(){jQuery(t).hide()},1e4),!1):!jQuery(this).hasClass("ds-check-donation")||jQuery("#donationvalue").val()||jQuery("#donationvalue").val().match(/^\+?[0-9]*\.?[0-9]+$/)?(handler=stripe_checkout(s),!1===d?handler.open({key:s.key,locale:"auto",image:s.image,name:s.name,description:s.description,email:s.current_email_address,currency:n,panelLabel:s.panellabel,amount:r,billingAddress:d,allowRememberMe:a}):handler.open({key:s.key,locale:"auto",image:s.image,name:s.name,description:s.description,email:s.current_email_address,currency:n,panelLabel:s.panellabel,amount:r,billingAddress:d,shippingAddress:l,allowRememberMe:a}),void e.preventDefault()):(jQuery(t).html("Please enter amount<br/>"),jQuery(t).addClass("error"),jQuery(t).show(),setTimeout(function(){jQuery(t).hide()},1e4),!1)}),window.addEventListener("popstate",function(){handler.close()});